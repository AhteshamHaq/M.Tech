This code solves an example given in:
Marchetti, A., Chachuat, B., & Bonvin, D. (2009). Modifier-Adaptation Methodology for Real-Time Optimization. 
Industrial & Engineering Chemistry Research, 48(13), 6022-6033. doi: 10.1021/ie801352x

Kindly look at page no. 6026 of the mentioned article.